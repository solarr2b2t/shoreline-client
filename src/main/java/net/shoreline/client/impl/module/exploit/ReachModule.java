package net.shoreline.client.impl.module.exploit;

import net.shoreline.client.api.config.Config;
import net.shoreline.client.api.config.setting.BooleanConfig;
import net.shoreline.client.api.config.setting.NumberConfig;
import net.shoreline.client.api.module.ModuleCategory;
import net.shoreline.client.api.module.ToggleModule;
import net.shoreline.client.impl.event.network.ReachEvent;
import net.shoreline.client.impl.event.render.TargetEntityEvent;
import net.shoreline.eventbus.annotation.EventListener;

/**
 * @author linus
 * @since 1.0
 */
public class ReachModule extends ToggleModule
{
    //
    Config<Float> blockReachConfig = register(new NumberConfig<>("BlockReach", "The extended block reach distance", 4.0f, 4.5f, 6.0f));
    Config<Float> reachConfig = register(new NumberConfig<>("EntityReach", "The extended entity reach distance", 2.5f, 3.0f, 6.0f));
    Config<Boolean> noHitboxConfig = register(new BooleanConfig("NoHitbox", "Ignores hitboxes allowing player to interact through entities", false));

    /**
     *
     */
    public ReachModule()
    {
        super("Reach", "Extends player reach", ModuleCategory.EXPLOITS);
    }

    @Override
    public String getModuleData()
    {
        return Float.toString(reachConfig.getValue());
    }

    @EventListener
    public void onReach(ReachEvent.Entity event)
    {
        event.cancel();
        event.setReach(reachConfig.getValue());
    }

    @EventListener
    public void onReach(ReachEvent.Block event)
    {
        event.cancel();
        event.setReach(blockReachConfig.getValue());
    }

    @EventListener
    public void onTargetEntity(TargetEntityEvent event)
    {
        event.setCanceled(noHitboxConfig.getValue());
    }
}
